{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"profile-container\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = [\"value\"];\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"message success\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"message error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"h2\", null, _toDisplayString(_ctx.user), 1 /* TEXT */), _ctx.profile ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[14] || (_cache[14] = _createElementVNode(\"h2\", null, \"User Profile\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.updateProfile && $options.updateProfile(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Username:\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    type: \"text\",\n    value: _ctx.profile.username,\n    disabled: \"\"\n  }, null, 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Email:\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    type: \"email\",\n    value: _ctx.profile.email,\n    disabled: \"\"\n  }, null, 8 /* PROPS */, _hoisted_5)]), _createElementVNode(\"div\", _hoisted_6, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Destination:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.destination = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.destination]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Budget:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.budget = $event),\n    type: \"number\",\n    step: \"0.01\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.budget]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"Dietary Restrictions:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.dietary_restrictions = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.dietary_restrictions]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"Accessibility Needs:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.accessibility_needs = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.accessibility_needs]])]), _createElementVNode(\"div\", _hoisted_10, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"Language Preferences:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.language_preferences = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.language_preferences]])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $data.loading\n  }, _toDisplayString($data.loading ? 'Updating...' : 'Update Profile'), 9 /* TEXT, PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n    class: \"delete-btn\",\n    onClick: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.deleteProfile && $options.deleteProfile(...args), [\"prevent\"])),\n    disabled: $data.loading\n  }, \" Delete Profile \", 8 /* PROPS */, _hoisted_12), $data.successMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementBlock","_Fragment","_createElementVNode","_toDisplayString","_ctx","user","profile","_hoisted_1","onSubmit","_cache","_withModifiers","args","$options","updateProfile","_hoisted_2","type","value","username","disabled","_hoisted_3","_hoisted_4","email","_hoisted_5","_hoisted_6","$event","$data","form","destination","_hoisted_7","budget","step","_hoisted_8","dietary_restrictions","_hoisted_9","accessibility_needs","_hoisted_10","language_preferences","loading","_hoisted_11","onClick","deleteProfile","_hoisted_12","successMessage","_hoisted_13","_createCommentVNode","errorMessage","_hoisted_14"],"sources":["C:\\Users\\TyreseMakhubele\\Documents\\Other\\P\\SmartTravelApp\\Frontend\\smart-travel-planner\\src\\views\\ProfilePage.vue"],"sourcesContent":["<template>\r\n    <h2>{{ user }}</h2>\r\n    <div class=\"profile-container\" v-if=\"profile\">\r\n      <h2>User Profile</h2>\r\n  \r\n      <form @submit.prevent=\"updateProfile\">\r\n        <div class=\"form-group\">\r\n          <label>Username:</label>\r\n          <input type=\"text\" :value=\"profile.username\" disabled />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Email:</label>\r\n          <input type=\"email\" :value=\"profile.email\" disabled />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Destination:</label>\r\n          <input v-model=\"form.destination\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Budget:</label>\r\n          <input v-model=\"form.budget\" type=\"number\" step=\"0.01\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Dietary Restrictions:</label>\r\n          <input v-model=\"form.dietary_restrictions\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Accessibility Needs:</label>\r\n          <input v-model=\"form.accessibility_needs\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Language Preferences:</label>\r\n          <input v-model=\"form.language_preferences\" type=\"text\" />\r\n        </div>\r\n  \r\n        <button type=\"submit\" :disabled=\"loading\">\r\n          {{ loading ? 'Updating...' : 'Update Profile' }}\r\n        </button>\r\n  \r\n        <button class=\"delete-btn\" @click.prevent=\"deleteProfile\" :disabled=\"loading\">\r\n          Delete Profile\r\n        </button>\r\n  \r\n        <p class=\"message success\" v-if=\"successMessage\">{{ successMessage }}</p>\r\n        <p class=\"message error\" v-if=\"errorMessage\">{{ errorMessage }}</p>\r\n      </form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapMutations } from 'vuex';\r\n  import { getUserProfile, updateUserProfile, deleteUserProfile } from '@/api/BackendApi';\r\n  \r\n  export default {\r\n    name: 'ProfilePage',\r\n    data() {\r\n      return {\r\n        form: {\r\n          destination: '',\r\n          budget: '',\r\n          dietary_restrictions: '',\r\n          accessibility_needs: '',\r\n          language_preferences: '',\r\n        },\r\n        loading: false,\r\n        successMessage: '',\r\n        errorMessage: '',\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState(['user', 'profile']),\r\n    },\r\n    created() {\r\n      this.fetchProfile();\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setProfile', 'setUser']),\r\n      async fetchProfile() {\r\n        try {\r\n          this.loading = true;\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          const res = await getUserProfile(token);\r\n          this.setProfile(res.data);\r\n          this.form = { ...res.data };\r\n        } catch (err) {\r\n          this.errorMessage = 'Failed to load profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async updateProfile() {\r\n        try {\r\n          this.loading = true;\r\n          this.successMessage = '';\r\n          this.errorMessage = '';\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          await updateUserProfile(token, this.form);\r\n          this.successMessage = 'Profile updated successfully!';\r\n          this.fetchProfile();\r\n        } catch (err) {\r\n          this.errorMessage = err.response?.data?.error || 'Failed to update profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async deleteProfile() {\r\n        if (!confirm('Are you sure you want to delete your profile? This action cannot be undone.')) return;\r\n        try {\r\n          this.loading = true;\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          await deleteUserProfile(token);\r\n          this.setUser(null);\r\n          this.setProfile(null);\r\n          localStorage.removeItem('authToken');\r\n          this.$router.push('/login');\r\n        } catch (err) {\r\n          this.errorMessage = 'Failed to delete profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .profile-container {\r\n    max-width: 500px;\r\n    margin: 2rem auto;\r\n    padding: 2rem;\r\n    border: 1px solid #ddd;\r\n    border-radius: 8px;\r\n    background: #fff;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n  }\r\n  h2 {\r\n    margin-bottom: 1.5rem;\r\n    color: #007bff;\r\n  }\r\n  .form-group {\r\n    margin-bottom: 1rem;\r\n  }\r\n  label {\r\n    display: block;\r\n    font-weight: 600;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  input {\r\n    width: 100%;\r\n    padding: 0.6rem;\r\n    border-radius: 4px;\r\n    border: 1px solid #ccc;\r\n  }\r\n  button {\r\n    width: 100%;\r\n    padding: 0.8rem;\r\n    background: #007bff;\r\n    border: none;\r\n    color: white;\r\n    font-weight: bold;\r\n    border-radius: 4px;\r\n    margin-top: 1rem;\r\n    cursor: pointer;\r\n  }\r\n  button.delete-btn {\r\n    background: #dc3545;\r\n    margin-top: 0.5rem;\r\n  }\r\n  button:disabled {\r\n    background: #6c757d;\r\n  }\r\n  .message {\r\n    margin-top: 1rem;\r\n    font-weight: bold;\r\n  }\r\n  .success {\r\n    color: green;\r\n  }\r\n  .error {\r\n    color: red;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}