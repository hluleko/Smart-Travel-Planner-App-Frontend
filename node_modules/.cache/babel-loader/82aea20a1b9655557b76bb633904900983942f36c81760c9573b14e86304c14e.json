{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState, mapMutations } from 'vuex';\nimport { getUserProfile, updateUserProfile, deleteUserProfile } from '@/api/BackendApi';\nexport default {\n  name: 'ProfilePage',\n  data() {\n    return {\n      form: {\n        destination: '',\n        budget: '',\n        dietary_restrictions: '',\n        accessibility_needs: '',\n        language_preferences: ''\n      },\n      loading: false,\n      successMessage: '',\n      errorMessage: ''\n    };\n  },\n  computed: {\n    ...mapState(['user', 'profile'])\n  },\n  created() {\n    this.fetchProfile();\n  },\n  methods: {\n    ...mapMutations(['setProfile', 'setUser']),\n    async fetchProfile() {\n      try {\n        this.loading = true;\n        const token = this.user?.token || localStorage.getItem('authToken');\n        const res = await getUserProfile(token);\n        this.setProfile(res.data);\n        this.form = {\n          ...res.data\n        };\n      } catch (err) {\n        this.errorMessage = 'Failed to load profile.';\n      } finally {\n        this.loading = false;\n      }\n    },\n    async updateProfile() {\n      try {\n        this.loading = true;\n        this.successMessage = '';\n        this.errorMessage = '';\n        const token = this.user?.token || localStorage.getItem('authToken');\n        await updateUserProfile(token, this.form);\n        this.successMessage = 'Profile updated successfully!';\n        this.fetchProfile();\n      } catch (err) {\n        this.errorMessage = err.response?.data?.error || 'Failed to update profile.';\n      } finally {\n        this.loading = false;\n      }\n    },\n    async deleteProfile() {\n      if (!confirm('Are you sure you want to delete your profile? This action cannot be undone.')) return;\n      try {\n        this.loading = true;\n        const token = this.user?.token || localStorage.getItem('authToken');\n        await deleteUserProfile(token);\n        this.setUser(null);\n        this.setProfile(null);\n        localStorage.removeItem('authToken');\n        this.$router.push('/login');\n      } catch (err) {\n        this.errorMessage = 'Failed to delete profile.';\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapMutations","getUserProfile","updateUserProfile","deleteUserProfile","name","data","form","destination","budget","dietary_restrictions","accessibility_needs","language_preferences","loading","successMessage","errorMessage","computed","created","fetchProfile","methods","token","user","localStorage","getItem","res","setProfile","err","updateProfile","response","error","deleteProfile","confirm","setUser","removeItem","$router","push"],"sources":["C:\\Users\\TyreseMakhubele\\Documents\\Other\\P\\SmartTravelApp\\Frontend\\smart-travel-planner\\src\\views\\ProfilePage.vue"],"sourcesContent":["<template>\r\n    <div class=\"profile-container\" v-if=\"profile\">\r\n      <h2>User Profile</h2>\r\n  \r\n      <form @submit.prevent=\"updateProfile\">\r\n        <div class=\"form-group\">\r\n          <label>Username:</label>\r\n          <input type=\"text\" :value=\"profile.username\" disabled />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Email:</label>\r\n          <input type=\"email\" :value=\"profile.email\" disabled />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Destination:</label>\r\n          <input v-model=\"form.destination\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Budget:</label>\r\n          <input v-model=\"form.budget\" type=\"number\" step=\"0.01\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Dietary Restrictions:</label>\r\n          <input v-model=\"form.dietary_restrictions\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Accessibility Needs:</label>\r\n          <input v-model=\"form.accessibility_needs\" type=\"text\" />\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label>Language Preferences:</label>\r\n          <input v-model=\"form.language_preferences\" type=\"text\" />\r\n        </div>\r\n  \r\n        <button type=\"submit\" :disabled=\"loading\">\r\n          {{ loading ? 'Updating...' : 'Update Profile' }}\r\n        </button>\r\n  \r\n        <button class=\"delete-btn\" @click.prevent=\"deleteProfile\" :disabled=\"loading\">\r\n          Delete Profile\r\n        </button>\r\n  \r\n        <p class=\"message success\" v-if=\"successMessage\">{{ successMessage }}</p>\r\n        <p class=\"message error\" v-if=\"errorMessage\">{{ errorMessage }}</p>\r\n      </form>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { mapState, mapMutations } from 'vuex';\r\n  import { getUserProfile, updateUserProfile, deleteUserProfile } from '@/api/BackendApi';\r\n  \r\n  export default {\r\n    name: 'ProfilePage',\r\n    data() {\r\n      return {\r\n        form: {\r\n          destination: '',\r\n          budget: '',\r\n          dietary_restrictions: '',\r\n          accessibility_needs: '',\r\n          language_preferences: '',\r\n        },\r\n        loading: false,\r\n        successMessage: '',\r\n        errorMessage: '',\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState(['user', 'profile']),\r\n    },\r\n    created() {\r\n      this.fetchProfile();\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setProfile', 'setUser']),\r\n      async fetchProfile() {\r\n        try {\r\n          this.loading = true;\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          const res = await getUserProfile(token);\r\n          this.setProfile(res.data);\r\n          this.form = { ...res.data };\r\n        } catch (err) {\r\n          this.errorMessage = 'Failed to load profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async updateProfile() {\r\n        try {\r\n          this.loading = true;\r\n          this.successMessage = '';\r\n          this.errorMessage = '';\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          await updateUserProfile(token, this.form);\r\n          this.successMessage = 'Profile updated successfully!';\r\n          this.fetchProfile();\r\n        } catch (err) {\r\n          this.errorMessage = err.response?.data?.error || 'Failed to update profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      async deleteProfile() {\r\n        if (!confirm('Are you sure you want to delete your profile? This action cannot be undone.')) return;\r\n        try {\r\n          this.loading = true;\r\n          const token = this.user?.token || localStorage.getItem('authToken');\r\n          await deleteUserProfile(token);\r\n          this.setUser(null);\r\n          this.setProfile(null);\r\n          localStorage.removeItem('authToken');\r\n          this.$router.push('/login');\r\n        } catch (err) {\r\n          this.errorMessage = 'Failed to delete profile.';\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .profile-container {\r\n    max-width: 500px;\r\n    margin: 2rem auto;\r\n    padding: 2rem;\r\n    border: 1px solid #ddd;\r\n    border-radius: 8px;\r\n    background: #fff;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n  }\r\n  h2 {\r\n    margin-bottom: 1.5rem;\r\n    color: #007bff;\r\n  }\r\n  .form-group {\r\n    margin-bottom: 1rem;\r\n  }\r\n  label {\r\n    display: block;\r\n    font-weight: 600;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n  input {\r\n    width: 100%;\r\n    padding: 0.6rem;\r\n    border-radius: 4px;\r\n    border: 1px solid #ccc;\r\n  }\r\n  button {\r\n    width: 100%;\r\n    padding: 0.8rem;\r\n    background: #007bff;\r\n    border: none;\r\n    color: white;\r\n    font-weight: bold;\r\n    border-radius: 4px;\r\n    margin-top: 1rem;\r\n    cursor: pointer;\r\n  }\r\n  button.delete-btn {\r\n    background: #dc3545;\r\n    margin-top: 0.5rem;\r\n  }\r\n  button:disabled {\r\n    background: #6c757d;\r\n  }\r\n  .message {\r\n    margin-top: 1rem;\r\n    font-weight: bold;\r\n  }\r\n  .success {\r\n    color: green;\r\n  }\r\n  .error {\r\n    color: red;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}