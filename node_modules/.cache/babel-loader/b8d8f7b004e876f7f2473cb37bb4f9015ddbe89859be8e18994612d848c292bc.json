{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profile-container\"\n};\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = [\"value\"];\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"message success\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"message error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[14] || (_cache[14] = _createElementVNode(\"h2\", null, \"User Profile\", -1 /* HOISTED */)), _ctx.user ? (_openBlock(), _createElementBlock(\"form\", {\n    key: 0,\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.handleUpdateProfile && $options.handleUpdateProfile(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_2, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Username:\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    type: \"text\",\n    value: _ctx.user.username,\n    disabled: \"\"\n  }, null, 8 /* PROPS */, _hoisted_3)]), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Email:\", -1 /* HOISTED */)), _createElementVNode(\"input\", {\n    type: \"email\",\n    value: _ctx.user.email,\n    disabled: \"\"\n  }, null, 8 /* PROPS */, _hoisted_5)]), _createElementVNode(\"div\", _hoisted_6, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Destination:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.destination = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.destination]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", null, \"Budget:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.budget = $event),\n    type: \"number\",\n    step: \"0.01\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.budget]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", null, \"Dietary Restrictions:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.dietary_restrictions = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.dietary_restrictions]])]), _createElementVNode(\"div\", _hoisted_9, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", null, \"Accessibility Needs:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.accessibility_needs = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.accessibility_needs]])]), _createElementVNode(\"div\", _hoisted_10, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", null, \"Language Preferences:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.form.language_preferences = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.language_preferences]])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $data.loading\n  }, _toDisplayString($data.loading ? 'Updating...' : 'Update Profile'), 9 /* TEXT, PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n    class: \"delete-btn\",\n    onClick: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.handleDeleteProfile && $options.handleDeleteProfile(...args), [\"prevent\"])),\n    disabled: $data.loading\n  }, \" Delete Profile \", 8 /* PROPS */, _hoisted_12), $data.successMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_ctx","user","onSubmit","_cache","_withModifiers","args","$options","handleUpdateProfile","_hoisted_2","type","value","username","disabled","_hoisted_3","_hoisted_4","email","_hoisted_5","_hoisted_6","$event","$data","form","destination","_hoisted_7","budget","step","_hoisted_8","dietary_restrictions","_hoisted_9","accessibility_needs","_hoisted_10","language_preferences","loading","_hoisted_11","onClick","handleDeleteProfile","_hoisted_12","successMessage","_hoisted_13","_toDisplayString","_createCommentVNode","errorMessage","_hoisted_14"],"sources":["C:\\Users\\TyreseMakhubele\\Documents\\Other\\P\\SmartTravelApp\\Frontend\\smart-travel-planner\\src\\views\\ProfilePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <h2>User Profile</h2>\r\n\r\n    <form @submit.prevent=\"handleUpdateProfile\" v-if=\"user\">\r\n      <div class=\"form-group\">\r\n        <label>Username:</label>\r\n        <input type=\"text\" :value=\"user.username\" disabled />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Email:</label>\r\n        <input type=\"email\" :value=\"user.email\" disabled />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Destination:</label>\r\n        <input v-model=\"form.destination\" type=\"text\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Budget:</label>\r\n        <input v-model=\"form.budget\" type=\"number\" step=\"0.01\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Dietary Restrictions:</label>\r\n        <input v-model=\"form.dietary_restrictions\" type=\"text\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Accessibility Needs:</label>\r\n        <input v-model=\"form.accessibility_needs\" type=\"text\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Language Preferences:</label>\r\n        <input v-model=\"form.language_preferences\" type=\"text\" />\r\n      </div>\r\n\r\n      <button type=\"submit\" :disabled=\"loading\">\r\n        {{ loading ? 'Updating...' : 'Update Profile' }}\r\n      </button>\r\n\r\n      <button class=\"delete-btn\" @click.prevent=\"handleDeleteProfile\" :disabled=\"loading\">\r\n        Delete Profile\r\n      </button>\r\n\r\n      <p class=\"message success\" v-if=\"successMessage\">{{ successMessage }}</p>\r\n      <p class=\"message error\" v-if=\"errorMessage\">{{ errorMessage }}</p>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  name: 'ProfilePage',\r\n  data() {\r\n    return {\r\n      form: {\r\n        destination: '',\r\n        budget: '',\r\n        dietary_restrictions: '',\r\n        accessibility_needs: '',\r\n        language_preferences: '',\r\n      },\r\n      loading: false,\r\n      successMessage: '',\r\n      errorMessage: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['user']),\r\n  },\r\n  created() {\r\n    console.log('User data on creation:', this.user); // Log user data for debugging\r\n    if (this.user) {\r\n      this.initForm(this.user);\r\n      console.log('User data after refresh :', this.user); // Log user data for debugging\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['updateProfile', 'deleteProfile', 'fetchUser']),\r\n    \r\n    initForm(user) {\r\n      if (user) {\r\n        this.form = {\r\n          destination: user.destination || '',\r\n          budget: user.budget || '',\r\n          dietary_restrictions: user.dietary_restrictions || '',\r\n          accessibility_needs: user.accessibility_needs || '',\r\n          language_preferences: user.language_preferences || '',\r\n        };\r\n      }\r\n    },\r\n\r\n    async handleUpdateProfile() {\r\n      this.loading = true;\r\n      this.successMessage = '';\r\n      this.errorMessage = '';\r\n      try {\r\n        await this.updateProfile(this.form);\r\n        await this.fetchUser();\r\n        this.successMessage = 'Profile updated successfully!';\r\n      } catch (err) {\r\n        console.error('Update failed:', err);\r\n        this.errorMessage = err.response?.data?.error || 'Failed to update profile.';\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    async handleDeleteProfile() {\r\n      if (!confirm('Are you sure you want to delete your profile? This action cannot be undone.')) return;\r\n      this.loading = true;\r\n      try {\r\n        await this.deleteProfile();\r\n        this.$router.push('/login');\r\n      } catch (err) {\r\n        this.errorMessage = 'Failed to delete profile.';\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  max-width: 500px;\r\n  margin: 2rem auto;\r\n  padding: 2rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n}\r\nh2 {\r\n  margin-bottom: 1.5rem;\r\n  color: #007bff;\r\n}\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\nlabel {\r\n  display: block;\r\n  font-weight: 600;\r\n  margin-bottom: 0.5rem;\r\n}\r\ninput {\r\n  width: 100%;\r\n  padding: 0.6rem;\r\n  border-radius: 4px;\r\n  border: 1px solid #ccc;\r\n}\r\nbutton {\r\n  width: 100%;\r\n  padding: 0.8rem;\r\n  background: #007bff;\r\n  border: none;\r\n  color: white;\r\n  font-weight: bold;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  cursor: pointer;\r\n}\r\nbutton.delete-btn {\r\n  background: #dc3545;\r\n  margin-top: 0.5rem;\r\n}\r\nbutton:disabled {\r\n  background: #6c757d;\r\n}\r\n.message {\r\n  margin-top: 1rem;\r\n  font-weight: bold;\r\n}\r\n.success {\r\n  color: green;\r\n}\r\n.error {\r\n  color: red;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}